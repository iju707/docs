import{_ as d,r as l,o as r,c as p,a as n,b as e,d as s,w as o,e as i}from"./app-95e21c4a.js";const u="/assets/quick-hello-world-1-36f30792.png",m="/assets/quick-hello-world-2-672063fd.png",v="/assets/quick-hello-world-3-aa6e5677.png",k={},b=n("p",null,[e("이번 장에서는 Docker Compose를 이용해서 간단한 파이썬 웹 어플리케이션을 만들어보겠습니다."),n("br"),e(" 어플리케이션은 Flask 프레임워크를 사용하며 Redis로 클릭수를 보관합니다."),n("br"),e(" 샘플에서 파이썬을 쓰고는 있지만 익숙치 않더라도 걱정하지 않으셔도 됩니다.")],-1),h=n("h2",{id:"사전요구사항",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#사전요구사항","aria-hidden":"true"},"#"),e(" 사전요구사항")],-1),g=n("br",null,null,-1),_=i(`<h2 id="_1단계-구성" tabindex="-1"><a class="header-anchor" href="#_1단계-구성" aria-hidden="true">#</a> 1단계 : 구성</h2><p>어플리케이션의 종속성을 정의합니다.</p><ol><li><p>프로젝트의 디렉터리를 생성합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ mkdir composetest
$ cd composetest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>app.py</code>라는 파일을 프로젝트 디렉터리에 생성하고 아래 내용을 복사합니다.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> time

<span class="token keyword">import</span> redis
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask

app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
cache <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;redis&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_hit_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    retries <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> cache<span class="token punctuation">.</span>incr<span class="token punctuation">(</span><span class="token string">&#39;hits&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">except</span> redis<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span>ConnectionError <span class="token keyword">as</span> exc<span class="token punctuation">:</span>
            <span class="token keyword">if</span> retries <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">raise</span> exc
            retries <span class="token operator">-=</span> <span class="token number">1</span>
            time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    count <span class="token operator">=</span> get_hit_count<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&#39;Hello World! I have been seen {} times.\\n&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>예제에서, <code>redis</code>는 어플리케이션 네트워크내 Redis 컨테이너의 호스트 이름입니다.<br> Redis의 기본 포트인 <code>6379</code>를 사용할 것 입니다.</p><blockquote><p>일시적 오류 다루기</p><p><code>get_hit_count</code> 함수가 작성된 내용을 참고하시기 바랍니다.<br> Redis 서비스가 동작하지 않을 경우 반복하여 요청하도록 재시도 반복구문이 적용되어있습니다.<br> 이것은 어플리케이션이 온라인이 되도록 시작할 때 유용합니다.<br> 또한 어플리케이션이 동작중에 Redis 서비스의 재시작이 가능하도록 합니다.<br> 클러스터에서는 노드간의 일시적 연결 끊킴을 다루는데 도움이 됩니다.</p></blockquote></li><li><p><code>requirements.txt</code>라는 파일을 프로젝트 디렉터리에 생성하고 아래 내용을 복사합니다.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>flask
redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="단계-2-dockerfile-생성" tabindex="-1"><a class="header-anchor" href="#단계-2-dockerfile-생성" aria-hidden="true">#</a> 단계 2 : Dockerfile 생성</h2><p>이번 단계애서는 Docker 이미지를 만들 Dockerfile을 작성합니다.<br> 이미지는 파이썬을 포함하여 어플리케이션에 필요한 종속성을 모두 포함합니다.</p><p>프로젝트 디렉터리에 <code>Dockerfile</code>을 생성하고 아래 내용을 복사합니다.</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token instruction"><span class="token keyword">FROM</span> python:3.7-alpine</span>
<span class="token instruction"><span class="token keyword">WORKDIR</span> /code</span>
<span class="token instruction"><span class="token keyword">ENV</span> FLASK_APP=app.py</span>
<span class="token instruction"><span class="token keyword">ENV</span> FLASK_RUN_HOST=0.0.0.0</span>
<span class="token instruction"><span class="token keyword">RUN</span> apk add --no-cache gcc musl-dev linux-headers</span>
<span class="token instruction"><span class="token keyword">COPY</span> requirements.txt requirements.txt</span>
<span class="token instruction"><span class="token keyword">RUN</span> pip install -r requirements.txt</span>
<span class="token instruction"><span class="token keyword">EXPOSE</span> 5000</span>
<span class="token instruction"><span class="token keyword">COPY</span> . .</span>
<span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;flask&quot;</span>, <span class="token string">&quot;run&quot;</span>]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>이것은 Docker에게 다음을 지시합니다.</p><ul><li>파이썬 3.7 이미지로 빌드를 시작합니다.</li><li><code>/code</code>로 작업 디렉터리를 설정합니다.</li><li><code>flask</code> 명령에서 사용할 환경변수를 설정합니다.</li><li>gcc와 다른 종속성을 설치합니다.</li><li><code>requirements.txt</code>를 복사하고 파이썬 종속성을 설치합니다.</li><li>컨테이너에 5000번 포트로 수신받는다는 메타정보를 추가합니다.</li><li><code>.</code>로 프로젝트의 현재 디렉터리를 이미지내 작업경로인 <code>.</code>로 복사합니다.</li><li><code>flask run</code>을 컨테이너의 기본 명령어로 설정합니다.</li></ul>`,9),f=i(`<h2 id="단계-3-compose-파일에-서비스를-정의" tabindex="-1"><a class="header-anchor" href="#단계-3-compose-파일에-서비스를-정의" aria-hidden="true">#</a> 단계 3 : Compose 파일에 서비스를 정의</h2><p><code>docker-compose.yml</code>이라는 파일을 프로젝트 디렉터리에 생성하고 아래 내용을 복사합니다.</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.9&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5000:5000&quot;</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&quot;redis:alpine&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>이 Compose 파일은 <code>web</code>과 <code>redis</code>라는 두개의 서비스를 정의합니다.</p><h3 id="web-서비스" tabindex="-1"><a class="header-anchor" href="#web-서비스" aria-hidden="true">#</a> Web 서비스</h3><p><code>web</code> 서비스는 현재 디렉터리에서 <code>Dockerfile</code>로 빌드한 이미지를 사용합니다.<br> 컨테이너와 호스트 머신의 <code>5000</code> 포트를 노출하도록 바인딩 합니다.<br> 예제 서비스에서는 Flask 웹 서비스의 기본 포트인 <code>5000</code>를 사용합니다.</p><h3 id="redis-서비스" tabindex="-1"><a class="header-anchor" href="#redis-서비스" aria-hidden="true">#</a> Redis 서비스</h3>`,7),w=n("code",null,"redis",-1),y={href:"https://registry.hub.docker.com/_/redis/",target:"_blank",rel:"noopener noreferrer"},x=i(`<h2 id="단계-4-compose로-빌드하고-실행" tabindex="-1"><a class="header-anchor" href="#단계-4-compose로-빌드하고-실행" aria-hidden="true">#</a> 단계 4 : Compose로 빌드하고 실행</h2><ol><li><p>프로젝트 디렉터리에서 <code>docker-compose up</code>으로 어플리케이션을 실행합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose up

Creating network &quot;composetest_default&quot; with the default driver
Creating composetest_web_1 ...
Creating composetest_redis_1 ...
Creating composetest_web_1
Creating composetest_redis_1 ... done
Attaching to composetest_web_1, composetest_redis_1
web_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
redis_1  | 1:C 17 Aug 22:11:10.480 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
redis_1  | 1:C 17 Aug 22:11:10.480 # Redis version=4.0.1, bits=64, commit=00000000, modified=0, pid=1, just started
redis_1  | 1:C 17 Aug 22:11:10.480 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
web_1    |  * Restarting with stat
redis_1  | 1:M 17 Aug 22:11:10.483 * Running mode=standalone, port=6379.
redis_1  | 1:M 17 Aug 22:11:10.483 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
web_1    |  * Debugger is active!
redis_1  | 1:M 17 Aug 22:11:10.483 # Server initialized
redis_1  | 1:M 17 Aug 22:11:10.483 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
web_1    |  * Debugger PIN: 330-787-903
redis_1  | 1:M 17 Aug 22:11:10.483 * Ready to accept connections
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Compose는 Redis 이미지를 다운받고 코드에서 이미지를 빌드하고 정의한 서비스를 시작합니다.<br> 이 경우, 코드는 빌드시 이미지안으로 정적 복사가 됩니다.</p></li><li><p>브라우저에서 <code>http://localhost:5000/</code>를 입력하여 동작중인 어플리케이션을 봅시다.</p><p>Linux, Docker Desktop for Mac, or Docker Desktop for Windows에서 Docker를 사용한다면 웹 어플리케이션이 Docker 데몬 호스트의 5000번 포트에서 수신받기 시작합니다.<br> 웹 브라우저에서 <code>http://localhost:5000</code>를 탐색하면 <code>Hello World</code> 메시지를 찾을 수 있습니다.<br> 만약 잘 안될 경우, <code>http://127.0.0.1:5000</code>으로 시도해보시기 바랍니다.</p><p>맥이나 윈도우에서 Docker 머신을 사용중이면, <code>docker-machine ip MACHINE_VM</code>명령으로 Docker 호스트의 IP를 확인합니다.<br> 그리고나서 <code>http://MACHINE_VM_IP:5000</code>으로 브라우저에서 탐색합니다.</p><p>브라우저에서 다음의 메시지를 확인할 수 있습니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>Hello World! I have been seen 1 times.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+u+`" alt="hello world in browser" loading="lazy"></p></li><li><p>페이지를 갱신합니다.</p><p>숫자가 증가합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>Hello World! I have been seen 2 times.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+m+`" alt="hello world in browser" loading="lazy"></p></li><li><p>다른 터미널 윈도우로 전환해서, <code>docker image ls</code>로 로컬 이미지를 조회합니다.</p><p>지금은 이미지가 <code>redis</code>와 <code>web</code>이 있습니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker image ls

REPOSITORY        TAG           IMAGE ID      CREATED        SIZE
composetest_web   latest        e2c21aa48cc1  4 minutes ago  93.8MB
python            3.4-alpine    84e6077c7ab6  7 days ago     82.5MB
redis             alpine        9d8fa9aa0e5b  3 weeks ago    27.5MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker inspect &lt;tag or id&gt;</code>로 이미지를 검증해볼 수 있습니다.</p></li><li><p>어플리케이션을 종료하려면, 두번째 터미널의 프로젝트 디렉터리에서 <code>docker-compose down</code>을 실행합니다.<br> 또는 어플리케이션이 실행중인 원래 터미널에서 <code>CTRL+C</code>를 입력하면 됩니다.</p></li></ol><h2 id="단계-5-compose-파일을-수정하여-마운트-바인딩-추가" tabindex="-1"><a class="header-anchor" href="#단계-5-compose-파일을-수정하여-마운트-바인딩-추가" aria-hidden="true">#</a> 단계 5: Compose 파일을 수정하여 마운트 바인딩 추가</h2>`,3),C=n("code",null,"docker-compose.yml",-1),D=n("code",null,"web",-1),R=i(`<div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.9&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> .
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;5000:5000&quot;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> .<span class="token punctuation">:</span>/code
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">FLASK_ENV</span><span class="token punctuation">:</span> development
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&quot;redis:alpine&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>volumes</code>의 내용은 프로젝트 디렉터리(현재 디렉터리)를 컨테이너의 <code>/code</code>로 마운트 하는 것 입니다.<br> 그래서 이미지를 재빌드 하지 않고 즉석에서 코드를 수정할 수 있게 합니다.<br><code>environment</code>의 내용은 <code>FLASK_ENV</code>라는 환경변수를 설정해서 <code>flask run</code> 명령을 개발환경으로 실행하여 코드가 변경되면 재시작하도록 합니다.<br> 이 모드는 필히 개발환경에서만 사용해야합니다.</p><h2 id="단계-6-compose로-다시-빌드-후-실행" tabindex="-1"><a class="header-anchor" href="#단계-6-compose로-다시-빌드-후-실행" aria-hidden="true">#</a> 단계 6: Compose로 다시 빌드 후 실행</h2><p>프로젝트 디렉터리에서 <code>docker-compose up</code>를 입력해서 갱신된 Compose 파일로 어플리케이션을 빌드하고 실행합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose up

Creating network &quot;composetest_default&quot; with the default driver
Creating composetest_web_1 ...
Creating composetest_redis_1 ...
Creating composetest_web_1
Creating composetest_redis_1 ... done
Attaching to composetest_web_1, composetest_redis_1
web_1    |  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Hello World</code> 메시지가 브라우저에 표시되고 갱신하면 카운트가 증가하는지 확인합니다.</p>`,6),q=n("p",null,"공유폴더, 볼륨, 마운트 바인딩",-1),A=n("code",null,"Users",-1),O=n("code",null,"cd ~",-1),I=n("code",null,"C:\\Users",-1),N=n("code",null,"/Users",-1),E=n("br",null,null,-1),M={href:"https://www.virtualbox.org/ticket/14920",target:"_blank",rel:"noopener noreferrer"},P=i(`<h2 id="단계-7-어플리케이션-갱신" tabindex="-1"><a class="header-anchor" href="#단계-7-어플리케이션-갱신" aria-hidden="true">#</a> 단계 7: 어플리케이션 갱신</h2><p>볼륨을 사용해서 컨테이너안으로 어플리케이션 코드가 마운트 되었기 때문에, 이미지를 다시 빌드할 필요없이 코드를 수정하고 즉각적으로 변경을 볼 수 있습니다.</p><p><code>app.py</code>에서 환영메시지를 변경하고 저장합니다.<br> 예로들어, <code>Hello World!</code>를 <code>Hello from Docker!</code>로 변경합니다.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">return</span> <span class="token string">&#39;Hello from Docker! I have been seen {} times.\\n&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>브라우저에 어플리케이션을 갱신합니다.<br> 환영메시지가 갱신되었고 카운터는 계속 증가하게 됩니다.</p><p><img src="`+v+`" alt="hello world in browser" loading="lazy"></p><h2 id="단계-8-step-8-다른-명령-실험" tabindex="-1"><a class="header-anchor" href="#단계-8-step-8-다른-명령-실험" aria-hidden="true">#</a> 단계 8: Step 8: 다른 명령 실험</h2><p>서비스를 백그라운드에서 실행하려면 <code>docker-compose up</code> 명령에 <code>-d</code> 옵션(&quot;detached&quot; 모드)을 추가합니다.<br> 그리고 <code>docker-compose ps</code>로 현재 실행중인 것을 확인합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose up -d

Starting composetest_redis_1...
Starting composetest_web_1...

$ docker-compose ps

       Name                      Command               State           Ports         
-------------------------------------------------------------------------------------
composetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp              
composetest_web_1     flask run                        Up      0.0.0.0:5000-&gt;5000/tcp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>docker-compose run</code> 명령은 서비스에 일회성 명령어를 실행할 수 있습니다.<br> 예로, <code>web</code> 서비스의 가능한 환경변수를 조회하려면 다음과 같이 실행합니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose run web env
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,11),T=n("code",null,"docker-compose --help",-1),H=n("br",null,null,-1),S=i(`<p><code>docker-compose up -d</code>로 시작하였다면 사용이 완료되어 서비스를 중지하려면 다음과 같이 하면 됩니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>down</code> 명령으로 전체를 중단시키고 컨테이너 전부를 삭제할 수 있습니다.<br><code>--volumes</code>를 추가하면 Redis 컨테이너에서 사용한 데이터볼륨까지 삭제할 수 있습니다.</p><div class="language-console line-numbers-mode" data-ext="console"><pre class="language-console"><code>$ docker-compose down --volumes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>여기까지 하시면, Compose가 어떻게 동작하는지에 대한 기본을 배우게 됩니다.</p><h2 id="다음단계로" tabindex="-1"><a class="header-anchor" href="#다음단계로" aria-hidden="true">#</a> 다음단계로</h2>`,6);function W(L,V){const a=l("RouterLink"),c=l("ExternalLinkIcon"),t=l("AdsenseB");return r(),p("div",null,[b,h,n("p",null,[e("시작하기전 "),s(a,{to:"/docker/get-docker.html"},{default:o(()=>[e("Docker Engine")]),_:1}),e("과 "),s(a,{to:"/docker/compose/install.html"},{default:o(()=>[e("Docker Compose")]),_:1}),e("가 설치되어야 합니다."),g,e(" Docker 이미지에서 사용할 예정이므로 파이썬과 Redis는 설치할 필요가 없습니다.")]),_,n("p",null,[e("Dockerfile을 작성하는 방법에 관련해서는 "),s(a,{to:"/docker/develop/"},{default:o(()=>[e("Docker 사용자 가이드")]),_:1}),e("나 "),s(a,{to:"/engine/reference/builder/"},{default:o(()=>[e("Dockerfile 참조")]),_:1}),e("를 참고하시기 바랍니다.")]),f,n("p",null,[w,e(" 서비스는 Docker Hub 레지스트리에서 공식 "),n("a",y,[e("Redis"),s(c)]),e(" 이미지를 받아 사용합니다.")]),x,n("p",null,[e("프로젝트 디렉터리의 "),C,e(" 파일을 수정하여 "),D,e("서비스에 "),s(a,{to:"/docker/storage/bind-mounts.html"},{default:o(()=>[e("마운트 바인딩")]),_:1}),e("을 추가합니다.")]),R,n("blockquote",null,[q,n("ul",null,[n("li",null,[n("p",null,[e("프로젝트가 "),A,e(" 디렉터리 ("),O,e(") 밖에 있는 경우, 사용할 Dockerfile과 볼륨의 드라이브나 경로가 공유되어야 합니다. 어플리케이션 파일이 없다고 오류가 발생할 경우, 볼륨 마운트가 거부되었거나 서비스 시작을 못하거나 파일 또는 드라이브 공유를 시도하는 것 입니다. 볼륨 마운트는 "),I,e(" (윈도우) 또는 "),N,e(" (맥) 밖에 있는 프로젝트의 공유 드라이브가 필요합니다. 그리고 Docker Desktop for Windows에서 "),s(a,{to:"/docker/docker-for-windows/#switch-between-windows-and-linux-containers"},{default:o(()=>[e("Linux 컨테이너")]),_:1}),e("를 사용할 경우 항상 필요합니다."),E,e(" 추가적인 정보로 Docker Desktop for Mac에서는 "),s(a,{to:"/docker/docker-for-mac/#file-sharing"},{default:o(()=>[e("File 공유")]),_:1}),e("를 참고하시기 바랍니다. 일반적인 예제는 "),s(a,{to:"/docker/storage/volumes.html"},{default:o(()=>[e("컨테이너에서 데이터 관리")]),_:1}),e("를 참고하시기 바랍니다.")])]),n("li",null,[n("p",null,[e("만약 구형 윈도우 OS에서 Oracle VirtualBox를 사용할 경우, "),n("a",M,[e("VB trouble ticket"),s(c)]),e("의 내용과 같은 공유폴더 이슈에 직면하게 될 것 입니다. 최신 윈도우 시스템에서는 "),s(a,{to:"/docker/docker-for-windows/install.html"},{default:o(()=>[e("Docker Desktop for Windows")]),_:1}),e("의 요구사항으로 VirtualBox가 필요하지 않습니다.")])])])]),P,n("p",null,[T,e(" 명령으로 가능한 명령을 볼 수 있습니다."),H,e(" 또한 bash나 zsh 쉘에 "),s(a,{to:"/docker/compose/completion.html"},{default:o(()=>[e("명령어 자동완성")]),_:1}),e("을 설치하면 명령어 확인이 가능합니다.")]),S,n("ul",null,[n("li",null,[e("다음으로, "),s(a,{to:"/docker/compose/samples-for-compose.html"},{default:o(()=>[e("Compose를 활용한 샘플 어플리케이션")]),_:1}),e("을 하세요")]),n("li",null,[s(a,{to:"/docker/compose/reference/"},{default:o(()=>[e("Compose의 전체 명령어를 살펴보세요")]),_:1})]),n("li",null,[s(a,{to:"/docker/compose/compose-file/"},{default:o(()=>[e("Compose 설정 파일 참조")]),_:1})]),n("li",null,[e("볼륨과 마운트 바인딩에 대해 알아보고 싶으면, "),s(a,{to:"/docker/storage/"},{default:o(()=>[e("Docker에서 데이터 관리")]),_:1}),e("를 살펴보세요")])]),s(t)])}const F=d(k,[["render",W],["__file","gettingstarted.html.vue"]]);export{F as default};
